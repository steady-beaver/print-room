(this["webpackJsonpprint-room-1.2"]=this["webpackJsonpprint-room-1.2"]||[]).push([[0],{118:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},139:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},204:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),s=n(119),a=n.n(s),i=(n(129),n(130),n(5)),o=n.n(i),l=n(8),u=n(3),j=n(9),d=n(7),b=n(51),p=(n(132),n(226),n(227),n(228),b.a.initializeApp({apiKey:"AIzaSyBZMP0WJ_dTfg-TTw0hrowhDCm9Iw2aHQc",authDomain:"printroom-11f4a.firebaseapp.com",projectId:"printroom-11f4a",storageBucket:"printroom-11f4a.appspot.com",messagingSenderId:"1079102889468",appId:"1:1079102889468:web:76fcf0a812176d90b5a679"})),h=p.storage(),m=(p.firestore(),p.auth()),O=(b.a.functions(),b.a.firestore.FieldValue.serverTimestamp,n(1)),f=Object(c.createContext)(),x=function(){return Object(c.useContext)(f)},v=function(e){var t=e.children,n=Object(c.useState)(),r=Object(u.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(!0),o=Object(u.a)(i,2),l=o[0],j=o[1];Object(c.useEffect)((function(){return m.onAuthStateChanged((function(e){a(e),j(!1)}))}),[]);var d={signup:function(e,t){return m.createUserWithEmailAndPassword(e,t)},login:function(e,t){return m.signInWithEmailAndPassword(e,t)},logout:function(){return m.signOut()},resetPassword:function(e){return m.sendPasswordResetEmail(e)},updateEmail:function(e){return s.updateEmail(e)},updatePassword:function(e){return s.updatePassword(e)},currentUser:s};return Object(O.jsx)(f.Provider,{value:d,children:!l&&t})},g=n(33),w=n(52),y=Object(c.createContext)(),N=function(){return Object(c.useContext)(y)},k=function(e){var t=e.children,n=Object(c.useState)([]),r=Object(u.a)(n,2),s=r[0],a=r[1];return Object(O.jsx)(y.Provider,{value:{shoppingList:s,addItem:function(e){if("custom_poster"===e.poster_type)a((function(t){return[].concat(Object(w.a)(t),[e])}));else{if("standard_poster"!==e.poster_type)throw new Error("Invalid poster type. Occured during addItem()");var t=s.find((function(t){return t.title===e.title&&t.poster_type===e.poster_type}));if(t){t.quantity+=e.quantity;var n=s.filter((function(t){return t.title!==e.title}));a([].concat(Object(w.a)(n),[t]))}else a((function(t){return[].concat(Object(w.a)(t),[e])}))}},removeItem:function(e){var t=s.filter((function(t){if(t.title!==e.title)return!0}));a(t)},overallPrice:function(){var e=0;return s.forEach((function(t){return e+=t.quantity*t.price.value})),e},getQty:function(e){var t=s.find((function(t){return t.uid===e}));return t?t.quantity:null},updateQty:function(e,t){var n=null,c=new Array;s.forEach((function(r){r.uid===e?n=Object(g.a)(Object(g.a)({},r),{},{quantity:t}):c.push(r)})),a([].concat(c,[n]))},validateUniqueName:function(e){var t=!0;return s.forEach((function(n){n.title===e&&(t=!1)})),t}},children:t})},S=function(){var e,t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)("hidden"),i=Object(u.a)(a,2),b=i[0],p=i[1],h=Object(c.useState)("hidden"),m=Object(u.a)(h,2),f=m[0],v=m[1],g=Object(j.g)(),w=x(),y=w.currentUser,k=w.logout,S=N().shoppingList,C=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:p("hidden"),g.push("/login");case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),E=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.c,{to:"/",exact:!0,children:" Home "})," "]}),Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.c,{to:"/login",children:"Log in"})," "]}),Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.c,{to:"/signup",children:"Sign up"})," "]})]}),F=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/",exact:!0,children:" Home "})}),Object(O.jsxs)("li",{onMouseEnter:function(){return v("")},onMouseLeave:function(){return v("hidden")},children:[Object(O.jsx)("a",{children:" Poster "}),Object(O.jsx)("div",{className:f+" sub-menu",children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/search",children:"Search"})}),Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/upload",children:"Upload"})})]})})]}),Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/shopping",children:Object(O.jsxs)("div",{id:"sh\u043epping-container",children:[Object(O.jsx)("img",{src:"/assets/shopping-bag-icon.svg",width:"25",alt:"Shopping bag icon"}),Object(O.jsxs)("div",{id:"shopping-counter",children:["  ",S.length,"  "]})]})})}),Object(O.jsxs)("li",{onMouseEnter:function(){return p("")},onMouseLeave:function(){return p("hidden")},children:[Object(O.jsx)("a",{children:Object(O.jsx)("img",{src:"/assets/profile-icon.svg",width:"30",alt:"Profile icon",id:"profile-icon-img"})}),Object(O.jsx)("div",{className:b+" sub-menu",children:Object(O.jsxs)("ul",{children:[Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.b,{to:"/profile",children:"Profile"})," "]}),Object(O.jsxs)("li",{children:[" ",Object(O.jsx)("a",{onClick:C,children:" Log out "})," "]})]})})]})]}),P=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/",exact:!0,children:" Home "})}),Object(O.jsxs)("li",{children:[" ",Object(O.jsx)("a",{children:" Poster "}),Object(O.jsx)("div",{className:" sub-menu",children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/search",children:"Search"})}),Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/upload",children:"Upload"})})]})})]}),Object(O.jsx)("li",{children:Object(O.jsx)(d.c,{to:"/shopping",children:" Shopping bag "})}),Object(O.jsxs)("li",{children:[" ",Object(O.jsx)("a",{children:"Account"}),Object(O.jsx)("div",{className:" sub-menu",children:Object(O.jsxs)("ul",{children:[Object(O.jsxs)("li",{children:[" ",Object(O.jsx)(d.b,{to:"/profile",children:"Profile"})," "]}),Object(O.jsxs)("li",{children:[" ",Object(O.jsx)("a",{onClick:C,children:" Log out "})," "]})]})})]})]});return e=null==y?E:r?P:F,Object(c.useEffect)((function(){e=E;var t=function(){window.innerWidth>640&&s(!1)};return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),Object(O.jsx)("header",{children:Object(O.jsxs)("div",{className:"side-frame ",children:[Object(O.jsx)("div",{id:"logo",children:Object(O.jsx)("img",{src:"/assets/logo.svg",alt:"Print room company logo"})}),Object(O.jsx)("div",{id:"hamburger-icon",children:Object(O.jsx)("a",{children:r?Object(O.jsx)("img",{className:"close-menu-icon",src:"/assets/x-close-icon.svg",alt:"Close mobile menu icon",onClick:function(){s((function(e){return!e}))}}):Object(O.jsx)("img",{className:"open-menu-icon",src:"/assets/hamburger-menu-icon.svg",alt:"Hamburger mobile menu icon",onClick:function(){s((function(e){return!e}))}})})}),Object(O.jsx)("nav",{className:r?"full-screen":"",children:Object(O.jsx)("ul",{onClick:function(){return s(!1)},children:e})})]})})},C=(n(139),function(){var e=Object(j.g)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{id:"message",children:[Object(O.jsx)("h1",{children:"Customize your room"}),Object(O.jsx)("h4",{children:"With our awesome posters"})]}),Object(O.jsxs)("div",{id:"actions",children:[Object(O.jsx)("button",{className:"btn primary-blue-btn",children:"Search"}),Object(O.jsx)("button",{className:"btn secondary-blue-btn",onClick:function(t){return e.push("/login")},children:" Log in "})]}),Object(O.jsx)("div",{id:"poster",children:Object(O.jsx)("img",{src:"./assets/rear-window-hitchcock-poster.png",alt:"Rear window movie poster"})})]})}),E=(n(55),function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),r=x(),s=r.currentUser,a=r.updateEmail,i=r.updatePassword,d=Object(j.g)(),b=Object(c.useState)(""),p=Object(u.a)(b,2),h=p[0],m=p[1],f=Object(c.useState)(!1),v=Object(u.a)(f,2),g=v[0],w=v[1],y=function(){var c=Object(l.a)(o.a.mark((function c(r){var l;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r.preventDefault(),t.current.value===n.current.value){c.next=3;break}return c.abrupt("return",m("Passwords do not match!"));case 3:l=[],m(""),w(!0),e.current.value!==s.email&&l.push(a(e.current.value)),t.current.value&&l.push(i(t.current.value)),Promise.all(l).then((function(){d.push("/")})).catch((function(){m("Failed to update account")})).finally((function(){w(!1)}));case 9:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"authentication-styles",children:"Update your profile"}),Object(O.jsxs)("form",{onSubmit:y,className:"authentication-styles",children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email"}),Object(O.jsx)("input",{type:"email",name:"email",id:"email",ref:e,defaultValue:s.email}),Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",id:"password",ref:t,placeholder:"Leave blank to keep the same"}),Object(O.jsx)("label",{htmlFor:"repeat-password",children:"Repeat password"}),Object(O.jsx)("input",{type:"password",name:"repeat-password",id:"repeat-password",ref:n,placeholder:"Leave blank to keep the same"}),h&&Object(O.jsx)("span",{className:"err-msg",children:h}),Object(O.jsx)("button",{type:"submit",disabled:g,className:"btn primary-blue-btn",children:"Submit"})]})]})}),F=n(18),P=n.n(F),_=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),r=x().signup,s=Object(j.g)(),a=Object(c.useState)(""),i=Object(u.a)(a,2),d=i[0],b=i[1],p=Object(c.useState)(!1),h=Object(u.a)(p,2),m=h[0],f=h[1],v=function(){var c=Object(l.a)(o.a.mark((function c(a){var i,l;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a.preventDefault(),t.current.value===n.current.value){c.next=3;break}return c.abrupt("return",b("Passwords do not match!"));case 3:return c.prev=3,b(""),f(!0),c.next=8,r(e.current.value,t.current.value);case 8:return i=c.sent,c.next=11,i.user.getIdToken();case 11:return l=c.sent,c.next=14,P.a.post("https://us-central1-printroom-11f4a.cloudfunctions.net/backend/create-user",{firebaseToken:l});case 14:c.sent,s.push("/"),c.next=23;break;case 18:c.prev=18,c.t0=c.catch(3),console.log(c.t0),b("Failed to create account!"),f(!1);case 23:case"end":return c.stop()}}),c,null,[[3,18]])})));return function(e){return c.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"authentication-styles",children:"Create your profile"}),Object(O.jsxs)("form",{onSubmit:v,className:"authentication-styles",children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email"}),Object(O.jsx)("input",{type:"email",name:"email",id:"email",ref:e}),Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",id:"password",ref:t}),Object(O.jsx)("label",{htmlFor:"repeat-password",children:"Repeat password"}),Object(O.jsx)("input",{type:"password",name:"repeat-password",id:"repeat-password",ref:n}),d&&Object(O.jsx)("span",{className:"err-msg",children:d}),Object(O.jsx)("button",{type:"submit",disabled:m,className:"btn primary-blue-btn",children:"Submit"})]})]})},R=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(j.g)(),r=Object(c.useState)(""),s=Object(u.a)(r,2),a=s[0],i=s[1],b=Object(c.useState)(!1),p=Object(u.a)(b,2),h=p[0],m=p[1],f=x().login,v=function(){var c=Object(l.a)(o.a.mark((function c(r){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),c.prev=1,i(""),m(!0),c.next=6,f(e.current.value,t.current.value);case 6:n.push("/"),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(1),i("Failed to log into the account!"),m(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"authentication-styles",children:"Log into your account"}),Object(O.jsxs)("form",{onSubmit:v,className:"authentication-styles",children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email"}),Object(O.jsx)("input",{type:"text",name:"email",id:"email",ref:e}),Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",name:"password",id:"password",ref:t}),a&&Object(O.jsx)("span",{className:"err-msg",children:a}),Object(O.jsx)("button",{type:"submit",disabled:h,className:"btn primary-blue-btn",children:" Log in"}),Object(O.jsx)(d.b,{to:"forgot-password",className:"auth-link",children:Object(O.jsx)("span",{children:"Forgot password"})})]})]})},U=(n(157),n(158),function(e){var t=e.movie,n=e.movieDetails;return Object(O.jsxs)("div",{className:"movieSuggestion "+(t.poster_path?"selectable":"unselectable"),onClick:function(){return n(t)},children:[t.poster_path?Object(O.jsx)("img",{height:"100",src:"https://image.tmdb.org/t/p/w92/"+t.poster_path}):Object(O.jsx)("div",{className:"no-poster",children:"No available poster"}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsxs)("div",{children:[" ",t.title," "]}),Object(O.jsxs)("div",{children:[" ",t.release_date&&t.release_date.substring(0,4)," "]})]})]})}),L=n(50),I=(n(117),function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),a=Object(u.a)(s,2),i=a[0],j=a[1],d=Object(c.useState)(0),b=Object(u.a)(d,2),p=b[0],h=b[1],m=Object(c.useState)(0),O=Object(u.a)(m,2),f=O[0],x=O[1],v=Object(c.useState)(0),g=Object(u.a)(v,2),w=g[0],y=g[1],N=Object(c.useState)(!1),k=Object(u.a)(N,2),S=k[0],C=k[1],E=function(e){null==e?(j([]),h(0),x(0),y(0)):(j(e.results),h(e.page),y(e.page),x(e.total_pages)),C(!1)};Object(c.useEffect)((function(){""===n&&E(null);var e=setTimeout(Object(l.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=16;break}return e.prev=1,C(!0),e.next=5,P.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat("3182c037ebbf589728c6536c592ef982","&language=en-US&query=").concat(n,"&page=1&include_adult=false"));case 5:return t=e.sent,e.next=8,t.data;case 8:c=e.sent,E(c),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),C(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),1e3);return function(){clearTimeout(e)}}),[n]),Object(c.useEffect)((function(){w!==p&&n&&Object(l.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,P.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat("3182c037ebbf589728c6536c592ef982","&language=en-US&query=").concat(n,"&page=").concat(w,"&include_adult=false"));case 4:return t=e.sent,e.next=7,t.data;case 7:c=e.sent,E(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),C(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[w]);return[n,r,i,j,p,h,f,x,w,function(){w>1&&y((function(e){return e-1}))},function(){w<f&&y((function(e){return e+1}))},S]}),A=n(49),q=n.n(A),M=(n(204),function(e,t){var n=null;switch(e.type){case"image/png":n="png";break;case"image/jpeg":n="jpeg";break;case"image/jpg":n="jpg";break;default:throw new Error("Unknown file type ")}return new File([e],t+"."+n,{type:e.type})}),T=function(){return{firebaseUpload:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,r=M(t,n),s=h.ref(r.name),e.next=7,s.put(r);case 7:return e.next=9,s.getDownloadURL();case 9:c=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},B=n(48),D=n.n(B),z=function(e){var t=e.selectedMovie,n=e.handleBackBtn,r=Object(c.useState)(1),s=Object(u.a)(r,2),a=s[0],i=s[1],j=Object(c.useState)(!0),d=Object(u.a)(j,2),b=d[0],p=d[1],h=Object(c.useState)(!1),m=Object(u.a)(h,2),f=m[0],x=m[1],v=Object(c.useState)(!1),g=Object(u.a)(v,2),w=g[0],y=g[1],k=Object(c.useState)(""),S=Object(u.a)(k,2),C=S[0],E=S[1],F=N().addItem,_=T().firebaseUpload,R=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,r,s,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),E(""),c=null,r=null,e.prev=4,e.next=7,P.a.get("https://image.tmdb.org/t/p/w780/".concat(n.poster_path),{responseType:"blob"});case 7:return s=e.sent,a=s.data,o=n.title,c=o=(o=o.replace(/([.]+)/g,".")).replace(/[.]$/,""),e.next=12,_(a,c);case 12:r=e.sent,e.next=21;break;case 15:return e.prev=15,e.t0=e.catch(4),console.log(e.t0),E(e.t0.message),y(!1),e.abrupt("return");case 21:i={quantity:t,title:c,price:{id:"price_1IP5ZpAO6d164rgu0XHFBjMz",value:"10"},poster_url:r,poster_type:"standard_poster",uid:D.a.generate()},F(i),x(!0);case 24:case"end":return e.stop()}var o}),e,null,[[4,15]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"selectedMovieView",children:Object(O.jsxs)("div",{className:"panel",children:[Object(O.jsxs)("div",{className:"details",children:[Object(O.jsx)("img",{width:"30",className:"back-icon",src:"./assets/back-icon.png",alt:"",onClick:n}),Object(O.jsxs)("h4",{children:[t.title," "]})]}),Object(O.jsxs)("div",{className:"poster-container",children:[Object(O.jsx)(q.a,{color:"#154c9f",loading:b,size:50}),Object(O.jsx)("img",{onLoad:function(){return p(!1)},src:"https://image.tmdb.org/t/p/w342/".concat(t.poster_path),alt:"Print Room poster of ".concat(t.title)})]}),Object(O.jsx)("div",{className:"add-to-purchaise",children:f?Object(O.jsx)("span",{className:"btn primary-blue-btn",children:" Added "}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"text",className:"quantity-input",maxLength:"2",onBlur:function(){var e=Math.floor(a);i(0<e&&e<100?e:1)},value:a,onChange:function(e){return i(e.target.value)}}),Object(O.jsx)("span",{children:" posters per 10\u20ac"})]}),Object(O.jsx)("button",{onClick:function(){return R(a,t)},className:"btn primary-red-btn",disabled:w,children:"Add"}),C&&Object(O.jsx)("div",{children:C})]})})]})})},H=function(){var e=I(),t=Object(u.a)(e,12),n=t[0],r=t[1],s=t[2],a=(t[3],t[4]),i=(t[5],t[6]),o=(t[7],t[8],t[9]),l=t[10],d=t[11],b=Object(c.useState)(),p=Object(u.a)(b,2),h=p[0],m=p[1],f=Object(c.useRef)(),x=Object(j.h)();Object(c.useEffect)((function(){console.log(x),m(null),r("")}),[x]),Object(c.useEffect)((function(){f.current.focus()}),[]);var v=function(e){if(!e.poster_path)return null;m(e)},g=null;g=h?Object(O.jsx)(z,{selectedMovie:h,handleBackBtn:function(){return m(null)}}):null;var w=Object(O.jsxs)("div",{className:"search-view "+(s.length?"withResults":"withoutResults"),children:[Object(O.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(O.jsx)("label",{htmlFor:"search-input",children:"Movie"}),Object(O.jsx)("input",{type:"text",ref:f,name:"search-input",id:"search-input",value:n,onChange:function(e){return r(e.target.value)},autoComplete:"off"})]}),s.length?Object(O.jsx)("div",{className:"search-output",children:d?Object(O.jsx)(q.a,{color:"#154c9f",loading:d,size:50}):Object(O.jsxs)(L.a,{autoHide:!1,children:[Object(O.jsx)("ul",{children:i?s.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)(U,{movie:e,movieDetails:v})},e.id)})):1===a&&Object(O.jsx)("span",{children:"Cannot find any titles"})}),i>1&&Object(O.jsxs)("div",{className:"page-navigation",children:[Object(O.jsx)("button",{className:"btn secondary-red-btn",onClick:o,disabled:1==a,children:" < "}),Object(O.jsxs)("span",{className:"btn secondary-red-btn page-counter",children:["  "," ","  ",a," / ",i," "," ","  "]}),Object(O.jsx)("button",{className:"btn secondary-red-btn",onClick:l,disabled:a==i,children:" > "})]})]})}):""]});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"search-styles text-area",children:[Object(O.jsx)("h1",{children:"Search your titles"}),Object(O.jsx)("h4",{children:"Join the adventure with your design"})]}),Object(O.jsx)("div",{className:"search-styles dynamic-area ",children:h?g:w})]})},Q=(n(219),function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)({w:0,h:0}),a=Object(u.a)(s,2),i=a[0],j=a[1],d=Object(c.useState)(null),b=Object(u.a)(d,2),p=b[0],h=b[1],m=Object(c.useState)(""),f=Object(u.a)(m,2),x=f[0],v=f[1],g=Object(c.useState)(1),w=Object(u.a)(g,2),y=w[0],k=w[1],S=Object(c.useState)(""),C=Object(u.a)(S,2),E=C[0],F=C[1],P=Object(c.useState)(""),_=Object(u.a)(P,2),R=_[0],U=_[1],L=Object(c.useState)(!1),I=Object(u.a)(L,2),A=I[0],q=I[1],M=Object(c.useState)(!1),B=Object(u.a)(M,2),z=B[0],H=B[1],Q=Object(c.useState)(""),J=Object(u.a)(Q,2),W=J[0],V=J[1],Z=Object(c.useState)(0),$=Object(u.a)(Z,2),Y=$[0],X=$[1],K=N(),G=K.addItem,ee=K.validateUniqueName,te=T().firebaseUpload,ne=Object(c.useRef)(null),ce=Object(c.useRef)(null),re=Object(c.useRef)(null),se=Object(c.useRef)(null),ae=Object(c.useRef)(null),ie={dimension:new RegExp(/^\d{3,4}$/),name:new RegExp(/^(\w| ){5,40}$/),qty:new RegExp(/^[1-9][0-9]?$/)};Object(c.useEffect)((function(){var e;n&&(e=URL.createObjectURL(n),h(e))}),[n]);Object(c.useEffect)((function(){i.w&&oe("686",void 0)}),[i]);var oe=function(e,t){if("undefined"===typeof e)if(U(t),ie.dimension.test(t)){var n=Math.round(Number(t)*i.w/i.h);F(n.toString())}else F("");if("undefined"===typeof t)if(F(e),ie.dimension.test(e)){var c=Math.round(Number(e)*i.h/i.w);U(c.toString())}else U("")},le=function(e,t){return!!e.current&&(""===e.current.value?(e.current.className=e.current.className.replace(" invalid",""),!1):t.test(e.current.value.toString())?(e.current.className.includes("invalid")&&(e.current.className=e.current.className.replace(" invalid","")),!0):(e.current.className.includes("invalid")||(e.current.className+=" invalid"),!1))};Object(c.useEffect)((function(){le(se,ie.dimension)}),[E]),Object(c.useEffect)((function(){le(ae,ie.dimension)}),[R]);var ue=function(){var e=E*R/1e6;return Math.round(12+(e-.5)/.1*"0.3")};Object(c.useEffect)((function(){var e=le(re,ie.qty),t=le(se,ie.dimension),n=le(ae,ie.dimension);X(e&&t&&n?ue()*y:"")}),[E,R,y]);var je=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,r,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),t=x+" (".concat(E,"x").concat(R,")"),c=null,r=ee(t),s=le(ce,ie.name),e.prev=5,r){e.next=8;break}throw new Error("There is already custom poster with such name");case 8:if(s&&Y){e.next=10;break}throw new Error("Upload poster attributes are not valid");case 10:return e.next=12,te(n,t);case 12:c=e.sent,V(""),e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(5),console.error(e.t0),V(e.t0.message),H(!1),e.abrupt("return");case 22:a={quantity:y,title:t,price:{value:ue()},product_id:"prod_J447oq00eOhlMh",poster_url:c,poster_type:"custom_poster",dim:{w:E,h:R},uid:D.a.generate()},G(a),q(!0),H(!1),console.log("End of handleAddCustomPosterBtn() ");case 27:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"upload-styles text-area",children:[Object(O.jsx)("h1",{children:"Upload your design"}),Object(O.jsx)("h4",{children:"Make it come alive"})]}),Object(O.jsx)("div",{className:"upload-styles dynamic-area ",children:Object(O.jsxs)("form",{className:n?"chosenFile":"noFile",onSubmit:function(e){return e.preventDefault()},ref:ne,children:[Object(O.jsxs)("label",{htmlFor:"file-input",children:[Object(O.jsx)("span",{children:"File"}),Object(O.jsx)("span",{className:"btn secondary-blue-btn poster-file-name",children:n&&n.name}),Object(O.jsx)("input",{type:"file",name:"file-input",id:"file-input",onChange:function(e){var t=e.target.files[0];V(""),v(""),k(1),h(null),q(!1),j({w:0,h:0});try{if(!t)throw new ReferenceError("No picked file.");if(!["image/png","image/jpeg","image/jpg"].includes(t.type))throw new ReferenceError("Allowed formats are jpeg, jpg, png.");if(t.size<1e4)throw new ReferenceError("Poster file must be at least 0.3MB");r(t)}catch(n){r(null),V(n.message)}},autoComplete:"off"})]}),p&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"poster-preview",children:Object(O.jsx)("img",{src:p,onLoad:function(e){var t=e.target.naturalWidth,n=e.target.naturalHeight;j({w:t,h:n})}})}),A?Object(O.jsx)("span",{className:"btn primary-blue-btn successfully-added",children:"Added"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"row-flex-panel",children:[Object(O.jsx)("label",{htmlFor:"custom-name",children:"Name "}),Object(O.jsx)("input",{type:"text",id:"custom-name",className:"secondary-red-btn",ref:ce,value:x,onChange:function(e){v(e.target.value),le(ce,ie.name)}}),Object(O.jsx)("label",{htmlFor:"custom-qty",children:"Qty "}),Object(O.jsx)("input",{type:"text",id:"custom-qty",className:"secondary-red-btn",ref:re,value:y,onChange:function(e){k(e.target.value),le(re,ie.qty)}})]}),Object(O.jsxs)("div",{className:"row-flex-panel",children:[Object(O.jsx)("label",{htmlFor:"custom-poster-width",children:"Width "}),Object(O.jsx)("input",{type:"text",className:"secondary-red-btn",ref:se,maxLength:"8",value:E,onChange:function(e){return oe(e.target.value,void 0)},name:"custom-poster-width",id:"custom-poster-width"}),Object(O.jsx)("label",{htmlFor:"custom-poster-height",children:"Height "}),Object(O.jsx)("input",{type:"text",className:"secondary-red-btn",ref:ae,maxLength:"8",value:R,onChange:function(e){return oe(void 0,e.target.value)},name:"custom-poster-height",id:"custom-poster-height"}),Object(O.jsxs)("div",{className:"info-container",children:[Object(O.jsx)("img",{src:"./assets/info-icon.png",alt:""}),Object(O.jsx)("div",{className:"info-content",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Uploaded file must be above 0.3 MB. Available formats are jpeg, jpg, png."}),Object(O.jsx)("p",{children:"Standart movie poster size is 686\xd71016 mm (27\xd740 inches) Plese enter either width or height to make purchase. Other dimension will be taken by the uploaded picture ratio. "})]})})]})]}),W&&Object(O.jsx)("p",{className:"error-msg",children:W}),Object(O.jsxs)("div",{className:"row-flex-panel",children:[Object(O.jsxs)("span",{className:"price",children:[Object(O.jsx)("span",{children:" Price: "}),Y&&Object(O.jsxs)("span",{children:[Y,"\u20ac "]})]}),Object(O.jsx)("button",{className:"btn primary-red-btn",onClick:je,disabled:z,children:"Add"})]})]})]})]})})]})}),J=(n(220),n(221),function(e){var t=e.movie,n=e.setQtyAdjustPosterUid,c=N().removeItem;return Object(O.jsxs)("div",{className:"purchase-item outline",children:[Object(O.jsx)("div",{className:"image-container",children:Object(O.jsx)("img",{height:"100",src:t.poster_url,alt:"#"})}),Object(O.jsxs)("div",{className:"item-details",children:[Object(O.jsx)("div",{className:"movie-title",children:t.title}),Object(O.jsx)("div",{className:"movie-qty",onClick:function(){return n(t.uid)},children:t.quantity+" posters"}),Object(O.jsxs)("div",{children:[t.quantity*t.price.value," \u20ac"]}),Object(O.jsx)("div",{children:Object(O.jsx)("img",{className:"bucket-icon",onClick:function(){return c(t)},src:"./assets/bucket-icon.svg",alt:"Bucket icon"})})]})]})}),W=n(123),V=(n(222),function(e){var t=e.posterUid,n=e.closeModal,r=Object(c.useState)(1),s=Object(u.a)(r,2),a=s[0],i=s[1],o=N(),l=o.getQty,j=o.updateQty;Object(c.useEffect)((function(){i(l(t))}),[]);return Object(O.jsx)("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&n()},children:Object(O.jsxs)("div",{className:"qty-panel",children:[Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("button",{className:"btn secondary-red-btn",onClick:function(){return i((function(e){return e+1}))},disabled:a>=99,children:"+"}),Object(O.jsxs)("span",{className:"btn secondary-red-btn",children:[" ",a," "]}),Object(O.jsx)("button",{className:"btn secondary-red-btn",onClick:function(){return i((function(e){return e-1}))},disabled:a<=1,children:"-"})]}),Object(O.jsx)("button",{className:"btn primary-red-btn",onClick:function(){return function(e,t){j(e,t),n()}(t,a)},children:"Update"})]})})}),Z=Object(W.a)("pk_test_51ICFc8AO6d164rgu1TQu7UBQSH1D3Pw9p8e0rOfTdlS2I0oxmVjsR6edYT5Dz8hBezS0JOb1ZgjZjrgVCoOl5QF700X9AFJyRV"),$=function(){var e=N(),t=e.shoppingList,n=e.overallPrice,r=Object(c.useState)(!1),s=Object(u.a)(r,2),a=s[0],i=s[1],j=Object(c.useState)(null),d=Object(u.a)(j,2),b=d[0],p=d[1],h=Object(c.useState)(""),m=Object(u.a)(h,2),f=m[0],v=m[1],g=x().currentUser,w=function(){var e=Object(l.a)(o.a.mark((function e(){var n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(JSON.stringify(t,null,2)),v(""),i(!0),e.next=5,g.getIdToken();case 5:return n=e.sent,e.prev=6,e.next=9,Z;case 9:return c=e.sent,e.next=12,P.a.post("https://us-central1-printroom-11f4a.cloudfunctions.net/backend/create-checkout-session",{shoppingListArr:t,fbToken:n});case 12:return r=e.sent,console.log(r),e.next=16,c.redirectToCheckout({sessionId:r.data.id});case 16:s=e.sent,console.log(JSON.stringify(s,null,2)),s.error&&alert(s.error.message),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(6),v(e.t0.message),console.error(e.t0),i(!1);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"shopping-page text-area",children:[Object(O.jsx)("h1",{children:"Current order"}),Object(O.jsx)("h4",{children:"Bring life to the movies"})]}),Object(O.jsxs)("div",{className:"shopping-page dynamic-area",children:[Object(O.jsx)("div",{className:"items-container",children:t.length?Object(O.jsx)(L.a,{autoHide:!1,children:Object(O.jsx)("ul",{children:t.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)(J,{movie:e,setQtyAdjustPosterUid:p})},e.uid)}))})}):Object(O.jsx)("div",{className:"empty-bag",children:" Shopping bag is empty. "})}),Object(O.jsxs)("div",{className:"closing-deal",children:[Object(O.jsxs)("div",{className:"overall-price",children:[" Overall: ",n()," \u20ac "]}),Object(O.jsx)("button",{className:"btn primary-red-btn",onClick:w,disabled:!t.length||a,children:" Order now "}),f&&Object(O.jsx)("p",{children:f})]})]}),b&&Object(O.jsx)(V,{posterUid:b,closeModal:function(){return p(null)}})]})},Y=function(){var e=Object(c.useRef)(),t=Object(c.useState)(""),n=Object(u.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),j=i[0],d=i[1],b=Object(c.useState)(!1),p=Object(u.a)(b,2),h=p[0],m=p[1],f=x().resetPassword,v=function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,d(""),s(""),m(!0),t.next=7,f(e.current.value);case 7:d("Check your email."),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Login component catching error"),s("Failed to reset password!");case 14:m(!1);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"authentication-styles",children:"Forgot password"}),Object(O.jsxs)("form",{onSubmit:v,className:"authentication-styles",children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email"}),Object(O.jsx)("input",{type:"text",name:"email",id:"email",ref:e}),r&&Object(O.jsx)("span",{className:"err-msg",children:r}),j&&Object(O.jsx)("span",{className:"success-msg",children:j}),Object(O.jsx)("button",{type:"submit",disabled:h,className:"btn primary-blue-btn",children:" Reset password "})]})]})},X=n(124),K=function(e){var t=e.component,n=Object(X.a)(e,["component"]),c=x().currentUser;return Object(O.jsx)(j.b,Object(g.a)(Object(g.a)({},n),{},{render:function(e){return c?Object(O.jsx)(t,Object(g.a)({},e)):Object(O.jsx)(j.a,{to:"/landing-page"})}}))},G=(n(118),function(){var e=Object(j.h)(),t=x().currentUser;return Object(c.useEffect)(Object(l.a)(o.a.mark((function n(){var c,r,s,a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=new URLSearchParams(e.search),r=c.get("id"),console.log(r),!r){n.next=17;break}return n.prev=4,n.next=7,t.getIdToken();case 7:return s=n.sent,n.next=10,P.a.post("https://us-central1-printroom-11f4a.cloudfunctions.net/backend/successful-order",{sessionID:r,firebaseUserToken:s});case 10:a=n.sent,console.log(a.data),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(4),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[4,14]])}))),[e]),Object(O.jsxs)("div",{className:"purchase-response-message",children:[Object(O.jsx)("h1",{children:"Congratulations! "}),Object(O.jsx)("h4",{children:"You'll recieve posters in 3 working days."})]})}),ee=function(){var e=Object(j.h)();return Object(c.useEffect)((function(){(function(){var t=Object(l.a)(o.a.mark((function t(){var n,c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new URLSearchParams(e.search),c=n.get("id"),console.log(c),!c){t.next=14;break}return t.prev=4,t.next=7,P.a.post("https://us-central1-printroom-11f4a.cloudfunctions.net/backend/failed-order",{sessionID:c});case 7:r=t.sent,console.log(r.data),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(O.jsxs)("div",{className:"purchase-response-message",children:[Object(O.jsx)("h1",{children:"Transaction failed."}),Object(O.jsx)("h4",{children:"You are not charged."})]})},te=function(e){var t=e.img_url,n=e.heading,c=e.text,r=e.classes;return Object(O.jsxs)("div",{className:"merit "+r,children:[Object(O.jsx)("div",{className:"img-frame",children:Object(O.jsx)("img",{src:t,alt:""})}),Object(O.jsxs)("div",{className:"message",children:[Object(O.jsx)("h1",{children:n}),Object(O.jsx)("h4",{children:c})]})]})},ne=(n(223),function(){return Object(O.jsxs)("div",{className:"home-panel",children:[Object(O.jsx)(te,{img_url:"/assets/posters-group.png",heading:"Exclusive selection",text:"Diversity of modern actions as well as evergreen classics. Search in our extensive database that will serve all of your whims."}),Object(O.jsx)(te,{classes:"reverse",img_url:"/assets/tarantino-posturing.png",heading:"Create perfect setting",text:"Bring  the cinematic atmosphere into your place. And make your favourite characters come to live with help of our posters."}),Object(O.jsx)(te,{img_url:"/assets/harley-birds-of-prey-poster.png",heading:"Palpate blogbusters",text:"Warm up for the most waited titles this season. Ignite your imagination with the original cover even before release date."}),Object(O.jsx)(te,{classes:"reverse",img_url:"/assets/capitan-america-poster.png",heading:"Immersive adventure",text:"Bring  the cinematic atmosphere into your place. And make your favourite characters come to live with help of our posters."})]})}),ce=function(){return Object(O.jsx)("div",{className:"App ",children:Object(O.jsx)(v,{children:Object(O.jsx)(k,{children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(S,{}),Object(O.jsx)("div",{className:"content-in-grid-10x10",children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(K,{path:"/",exact:!0,component:ne}),Object(O.jsx)(j.b,{path:"/landing-page",exact:!0,component:C}),Object(O.jsx)(j.b,{path:"/signup",component:_}),Object(O.jsx)(j.b,{path:"/login",component:R}),Object(O.jsx)(j.b,{path:"/forgot-password",component:Y}),Object(O.jsx)(K,{path:"/profile",component:E}),Object(O.jsx)(K,{path:"/search",component:H}),Object(O.jsx)(K,{path:"/upload",component:Q}),Object(O.jsx)(K,{path:"/shopping",component:$}),Object(O.jsx)(K,{path:"/successful-order",component:G}),Object(O.jsx)(K,{path:"/failed-order",component:ee})]})})]})})})})};a.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(ce,{})}),document.getElementById("root"))},55:function(e,t,n){}},[[224,1,2]]]);
//# sourceMappingURL=main.7b3f15f2.chunk.js.map